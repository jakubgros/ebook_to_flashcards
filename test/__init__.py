#TODO make main packages self contained and move tests into it